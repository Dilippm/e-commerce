<%- include('../layout/admin/header.ejs')%>

<%- include('../layout/admin/navbar.ejs')%>
<%- include('../layout/admin/sidebar.ejs')%>


<div class="container">
  <div class="pagetitle" style="margin-top: 100px;">
    <h1><b>Products</b> </h1>
    
  </div>
  <div>
   <button type="button" class="btn btn-success"><a class="text-decoration-none text-white" href="/admin/product/addproduct">Add product</a></button>
   
    <br>
    <br>
  </div>


  <table class="table" id="categorytable">
    <thead>
      <tr>
        <th scope="col">No</th>
        <th scope="col">product Name</th>
        <th scope="col">Category</th>
       
        <th scope="col">Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Offer(%)</th>
        <th scope="col">Image</th>
        
        <th scope="col">Action</th>
      </tr>
    </thead>
  
      <tbody>
        <% productData.forEach((element,index) => {%>
          
     
        <tr>
          <th scope="row"><%=index+1%></th>
          <td><%=element.productName%></td>
          <td><%=element.category.category%></td>
        
          <td><%= Math.round(element.price) %></td>

          <td><%=element.quantity%></td>
          <td><%= element.offers && element.offers.length > 0 ? element.offers[0].discount : '-' %></td>

          <td><img src="/productImages/<%=element.images[0]%>" alt="" width="100px" height="100px"></td>
          <td >
            <a href="/admin/product/editproduct/<%=element.id%>">
              <i class="fa-solid fa-user-pen" style="padding-right: 10px; color: blue;"></i>
          </a>
          
          <a href="/admin/product/deleteproduct/<%=element.id%>" onclick="return confirm('Are you sure you want to delete this product?')">
            <i class="fas fa-trash" style="padding-right: 10px; color: red; "></i>
          </a>
          
          
          <% if (element.listed) { %>
            <button type="button" class="btn btn-danger">
              <a href="/admin/product/unlistproduct/<%= element._id %>" style="color: white; text-decoration: none;">Unlist</a>
            </button>
          <% } else { %>
            <button type="button" class="btn btn-success">
              <a href="/admin/product/listproduct/<%= element._id %>" style="color: white; text-decoration: none;">List</a>
            </button>
          <% } %>
          
          
          
          
          <a href="/admin/product/viewdetails/<%=element.id%>">
            <i class="fas fa-eye" style="padding-right: 10px; color: black " ></i>
          </a>
          
          </td>


         
        </tr>
     <% });%>
      </tbody>
      
  
      
          

          <script>
            $(document).ready( function () {
            $('#categorytable').DataTable();
        });
        </script>

</div>

    
     

<%- include('../layout/admin/footer.ejs')%>